# 系統更新說明

## 更新日期: 2025-01-05

## 📋 更新摘要

根據您的要求,已將登入系統修改為純登入模式,移除了首次設定流程。Super Admin 帳號需要透過後台系統建立。

## 🔄 主要變更

### 1. 移除首次設定流程

- ❌ 刪除 InitialSetup.tsx 頁面
- ❌ 移除 App.tsx 中的首次設定檢查邏輯
- ❌ 移除 auth.ts 中的 `isFirstTimeSetup()` 和 `createInitialSuperAdmin()` 函數
- ✅ 系統啟動後直接顯示登入頁面

### 2. 新增後台管理腳本

建立了 `scripts/createSuperAdmin.js` 腳本,用於透過命令列建立 Super Admin 帳號。

**使用方式**:
```bash
npm run create-admin
```

### 3. 測試帳號

已建立測試用 Super Admin 帳號:
- **使用者名稱**: `admin`
- **密碼**: `Admin123`
- **角色**: Super Admin
- **狀態**: 啟用

### 4. 更新文件

- ✅ 更新 `快速開始指南.md`
- ✅ 更新 `登入系統使用說明.md`
- ✅ 更新 `SYSTEM_STATUS.md`
- ✅ 新增 `scripts/README.md` (後台腳本說明)
- ✅ 新增 `SETUP_INSTRUCTIONS.md` (完整設定說明)

## 🚀 如何開始使用

### 方法 1: 使用已建立的測試帳號 (最快)

1. 確保開發伺服器正在運行:
   ```bash
   npm run dev
   ```

2. 開啟瀏覽器訪問: http://localhost:8080/

3. 按 F12 開啟開發者工具,進入 Console

4. 執行以下指令同步測試帳號:
   ```javascript
   fetch('/data/users.json')
     .then(r => r.json())
     .then(users => {
       localStorage.setItem('hospital_crm_users', JSON.stringify(users));
       console.log('✅ 帳號同步成功');
       window.location.reload();
     });
   ```

5. 使用測試帳號登入:
   - 使用者名稱: `admin`
   - 密碼: `Admin123`

### 方法 2: 建立自己的 Super Admin 帳號

1. 執行後台腳本:
   ```bash
   npm run create-admin
   ```

2. 依照提示輸入帳號資訊

3. 使用瀏覽器開發者工具同步帳號 (參考方法1步驟3-4)

4. 使用您建立的帳號登入

## 📁 檔案結構變更

```
新增:
  scripts/
    ├── createSuperAdmin.js    # 後台管理腳本
    └── README.md              # 腳本使用說明
  data/
    └── users.json             # 使用者資料 (後台建立)
  public/data/
    └── users.json             # 公開的使用者資料 (供瀏覽器載入)
  SETUP_INSTRUCTIONS.md        # 完整設定說明
  系統更新說明.md              # 本文件

刪除:
  src/pages/InitialSetup.tsx   # 首次設定頁面

修改:
  src/App.tsx                  # 移除首次設定邏輯
  src/lib/auth.ts              # 移除首次設定相關函數
  package.json                 # 新增 create-admin 腳本
  快速開始指南.md
  登入系統使用說明.md
  SYSTEM_STATUS.md
```

## 🔒 安全提醒

1. **修改預設密碼**
   - 測試帳號的密碼是公開的
   - 正式使用前請務必修改密碼
   - 或建立新的 Super Admin 後刪除測試帳號

2. **保管帳號資訊**
   - Super Admin 擁有完整系統權限
   - 請妥善保管帳號密碼
   - 定期更換密碼

3. **備份資料**
   - 定期備份 localStorage 資料
   - 或使用系統內的資料匯出功能

## 📊 系統狀態

- ✅ 開發伺服器: 運行中 (http://localhost:8080/)
- ✅ 登入系統: 正常運作
- ✅ 權限管理: 正常運作
- ✅ 使用者管理: 正常運作
- ✅ 測試帳號: 已建立

## 🎯 後續建議

### 立即執行
1. [ ] 使用測試帳號登入系統
2. [ ] 測試使用者管理功能
3. [ ] 建立正式的 Super Admin 帳號
4. [ ] 刪除或修改測試帳號密碼

### 未來優化
1. [ ] 實作自動同步機制 (將後台建立的帳號自動同步到系統)
2. [ ] 整合資料庫 (SQLite / PostgreSQL)
3. [ ] 新增批次匯入使用者功能
4. [ ] 實作兩步驟驗證 (2FA)
5. [ ] 新增操作日誌功能

## 📖 相關文件

詳細資訊請參考:
- [SETUP_INSTRUCTIONS.md](./SETUP_INSTRUCTIONS.md) - 完整設定說明
- [快速開始指南.md](./快速開始指南.md) - 快速入門
- [登入系統使用說明.md](./登入系統使用說明.md) - 登入系統操作
- [scripts/README.md](./scripts/README.md) - 後台腳本說明
- [AUTH_README.md](./AUTH_README.md) - 認證系統技術文件
- [SYSTEM_STATUS.md](./SYSTEM_STATUS.md) - 系統狀態報告

## ❓ 常見問題

**Q: 為什麼要移除首次設定流程?**
A: 根據您的需求,Super Admin 帳號應該透過後台系統建立,而不是讓使用者在前端建立,這樣更安全且更符合企業管理流程。

**Q: 如何重設 Super Admin 密碼?**
A: 可以由其他 Super Admin 在「使用者管理」中重設,或重新執行後台腳本建立新帳號。

**Q: 測試帳號可以刪除嗎?**
A: 可以,建議您建立正式的 Super Admin 帳號後,在「使用者管理」中刪除測試帳號。

**Q: 後台腳本是必需的嗎?**
A: 是的,移除首次設定流程後,必須透過後台腳本或直接操作資料庫來建立初始的 Super Admin 帳號。

---

**更新完成**: 2025-01-05
**版本**: 1.0.1
**更新者**: Claude Code Assistant

如有任何問題或需要進一步協助,請隨時告知!
